{"version":3,"sources":["webpack:///webpack/bootstrap 8f6ef7dca6f931246d06","webpack:///./src/js/lib/utils.js","webpack:///./src/js/lib/const.js","webpack:///./src/js/app.js","webpack:///./src/js/lib/Game.js","webpack:///./src/js/lib/Snake.js","webpack:///./src/js/lib/StatusModal.js","webpack:///./src/css/app.scss"],"names":["merge","a","Object","assign","push","arr","ptEqual","p1","p2","x","y","PtRandom","COL","ROW","Math","floor","random","isValidMove","abs","droppedHead","slice","droppedTail","length","PIXEL_RATIO","ratio","ctx","document","createElement","getContext","dpr","window","devicePixelRatio","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","createHiDPICanvas","w","h","canvas","id","width","height","style","setTransform","cancelAniFrame","cancelAnimationFrame","mozCancelAnimationFrame","mozCancelRequestAnimationFrame","webkitCancelRequestAnimationFrame","msCancelRequestAnimationFrame","msCancelAnimationFrame","requestAniFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","SCALE","NORTH","SOUTH","WEST","EAST","app","Game","init","state","col","row","directions","snake","food","frameID","bind","stop","restart","onKeyUp","addEventListener","querySelectorAll","appendChild","boxW","boxH","boxInfo","left","top","Snake","then","mozAnimationStartTime","Date","now","delta","interval","step","prevState","nextState","render","willDie","StatusModal","showDie","undefined","evt","preventDefault","rect","getBoundingClientRect","boxLeft","boxTop","clientX","clientY","removeEventListener","key","updateDirection","props","getElementById","fillStyle","fillRect","forEach","s","dir","concat","nextDirections","nextSnake","nextFood","head","willEat","nextHead","find","pt","CRASH_BORDER","lineWidth","strokeStyle","strokeRect","font","textAlign","fillText"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7Da;;AAEb;;;;;AACO,IAAMA,wBAAQ,SAARA,KAAQ;AAAA,sCAAIC,CAAJ;AAAIA,SAAJ;AAAA;;AAAA,WAAUC,OAAOC,MAAP,gBAAc,EAAd,SAAqBF,CAArB,EAAV;AAAA,CAAd;AACA,IAAMG,sBAAO,SAAPA,IAAO,CAACC,GAAD;AAAA,uCAASJ,CAAT;AAASA,SAAT;AAAA;;AAAA,YAAgBI,GAAhB,SAAwBJ,CAAxB;AAAA,CAAb;AACP;AACO,IAAMK,4BAAU,SAAVA,OAAU,CAACC,EAAD,EAAKC,EAAL;AAAA,WAAYD,GAAGE,CAAH,KAASD,GAAGC,CAAZ,IAAiBF,GAAGG,CAAH,KAASF,GAAGE,CAAzC;AAAA,CAAhB;AACA,IAAMC,8BAAW,SAAXA,QAAW,CAACC,GAAD,EAAMC,GAAN;AAAA,WAAe,EAAEJ,GAAGK,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiBJ,MAAM,CAAvB,CAAX,CAAL,EAA4CF,GAAGI,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiBH,MAAM,CAAvB,CAAX,CAA/C,EAAf;AAAA,CAAjB;AACA,IAAMI,oCAAc,SAAdA,WAAc,CAACR,CAAD,EAAGC,CAAH;AAAA,WAAUD,MAAM,CAAN,IAAWK,KAAKI,GAAL,CAASR,CAAT,MAAgB,CAA5B,IAAmCA,MAAM,CAAN,IAAWI,KAAKI,GAAL,CAAST,CAAT,MAAgB,CAAvE;AAAA,CAApB,C,CAA+F;AAC/F,IAAMU,oCAAc,SAAdA,WAAc,CAACd,GAAD;AAAA,WAASA,IAAIe,KAAJ,CAAU,CAAV,CAAT;AAAA,CAApB;AACA,IAAMC,oCAAc,SAAdA,WAAc,CAAChB,GAAD;AAAA,WAASA,IAAIe,KAAJ,CAAU,CAAV,EAAaf,IAAIiB,MAAJ,GAAa,CAA1B,CAAT;AAAA,CAApB;;AAEP;AACO,IAAMC,oCAAe,UAACC,KAAD,EAAW;AACrC,QAAIA,KAAJ,EAAW,OAAOA,KAAP;AACX,QAAMC,MAAMC,SAASC,aAAT,CAAuB,QAAvB,EAAiCC,UAAjC,CAA4C,IAA5C,CAAZ;AAAA,QACIC,MAAMC,OAAOC,gBAAP,IAA2B,CADrC;AAAA,QAEIC,MAAMP,IAAIQ,4BAAJ,IACAR,IAAIS,yBADJ,IAEAT,IAAIU,wBAFJ,IAGAV,IAAIW,uBAHJ,IAIAX,IAAIY,sBAJJ,IAI8B,CANxC;AAOA,WAAOR,MAAMG,GAAb;AACD,CAV0B,EAApB;;AAYA,IAAMM,gDAAoB,SAApBA,iBAAoB,CAACC,CAAD,EAAIC,CAAJ,EAAOhB,KAAP,EAAiB;AAC9C,QAAI,CAACA,KAAL,EAAY;AAAEA,gBAAQD,WAAR;AAAsB;AACpC,QAAMkB,SAASf,SAASC,aAAT,CAAuB,QAAvB,CAAf;AACAc,WAAOC,EAAP,GAAY,UAAZ;AACAD,WAAOE,KAAP,GAAeJ,IAAIf,KAAnB;AACAiB,WAAOG,MAAP,GAAgBJ,IAAIhB,KAApB;AACAiB,WAAOI,KAAP,CAAaF,KAAb,GAAqBJ,IAAI,IAAzB;AACAE,WAAOI,KAAP,CAAaD,MAAb,GAAsBJ,IAAI,IAA1B;AACAC,WAAOb,UAAP,CAAkB,IAAlB,EAAwBkB,YAAxB,CAAqCtB,KAArC,EAA4C,CAA5C,EAA+C,CAA/C,EAAkDA,KAAlD,EAAyD,CAAzD,EAA4D,CAA5D;AACA,WAAOiB,MAAP;AACH,CAVM;;AAYA,IAAMM,0CAAiBjB,OAAOkB,oBAAP,IACSlB,OAAOmB,uBADhB,IAESnB,OAAOoB,8BAFhB,IAGSpB,OAAOmB,uBAHhB,IAISnB,OAAOqB,iCAJhB,IAKSrB,OAAOsB,6BALhB,IAMStB,OAAOuB,sBANvC;;AAQA,IAAMC,4CAAkBxB,OAAOyB,qBAAP,IACSzB,OAAO0B,wBADhB,IAES1B,OAAO2B,2BAFhB,IAGS3B,OAAO4B,uBAHxC,C;;;;;;;AC7CM;;AAEb;;;;;AACO,IAAM9C,oBAAK,EAAX;AACA,IAAMC,oBAAM,EAAZ;AACA,IAAM8C,wBAAQ,EAAd;;AAEP;AACO,IAAMC,wBAAQ,EAAEnD,GAAG,CAAL,EAAQC,GAAG,CAAC,CAAZ,EAAd;AACA,IAAMmD,wBAAQ,EAAEpD,GAAG,CAAL,EAAQC,GAAG,CAAX,EAAd;AACA,IAAMoD,sBAAO,EAAErD,GAAG,CAAC,CAAN,EAASC,GAAG,CAAZ,EAAb;AACA,IAAMqD,sBAAO,EAAEtD,GAAG,CAAL,EAAQC,GAAG,CAAX,EAAb,C;;;;;;;;;;;;;;ACXM;;AAEb;;;;AACA;;;;;;AAEA,IAAMsD,MAAM,IAAIC,cAAJ,EAAZ;AACAD,IAAIE,IAAJ,G;;;;;;;ACNa;;;;;;;;AAEb;;AACA;;AACA;;;;AACA;;;;;;;;IAGMD,I;AACJ,kBAAe;AAAA;;AACb;AACA,SAAKE,KAAL,GAAa;AACXC,WAAKxD,UADM;AAEXyD,WAAKxD,UAFM;AAGXyD,kBAAY,CAACR,WAAD,CAHD,EAGS;AACpBS,aAAO,EAJI,EAIC;AACZC,YAAM,qBAAS5D,UAAT,EAAcC,UAAd,CALK;AAMX4D,eAAS,IANE;AAOXhC,cAAQ;AAPG,KAAb;AASA,SAAKyB,IAAL,GAAY,KAAKA,IAAL,CAAUQ,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKE,OAAL,GAAe,KAAKA,OAAL,CAAaF,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKG,OAAL,GAAe,KAAKA,OAAL,CAAaH,IAAb,CAAkB,IAAlB,CAAf;AACA5C,WAAOgD,gBAAP,CAAwB,OAAxB,EAAiC,KAAKD,OAAtC,EAA+C,KAA/C;AACD;;;;2BAGO;AAAA;;AACN,UAAG,CAAC,KAAKV,KAAL,CAAW1B,MAAf,EAAuB;AACrB,YAAMA,SAAS,8BAAkB7B,aAAM+C,YAAxB,EAA+B9C,aAAM8C,YAArC,EAA4C,CAA5C,CAAf,CADqB,CAC0C;AAC/DjC,iBAASqD,gBAAT,CAA0B,kBAA1B,EAA8C,CAA9C,EAAiDC,WAAjD,CAA6DvC,MAA7D;AACA,YAAMwC,OAAOxC,OAAOE,KAAP,GAAepB,kBAAf,GAA6B,CAA1C;AACA,YAAM2D,OAAOzC,OAAOG,MAAP,GAAgBrB,kBAAhB,GAA8B,CAA3C;AACA,aAAK4D,OAAL,GAAe;AACb5C,aAAG0C,IADU;AAEbzC,aAAG0C,IAFU;AAGbE,gBAAM,CAAC3C,OAAOE,KAAP,GAAepB,kBAAf,GAA6B0D,IAA9B,IAAsC,CAH/B;AAIbI,eAAK,CAAC5C,OAAOG,MAAP,GAAgBrB,kBAAhB,GAA8B2D,IAA/B,IAAuC;AAJ/B,SAAf;AAMA,aAAKf,KAAL,CAAW1B,MAAX,GAAoBA,MAApB;AACD;;AAED,WAAK8B,KAAL,GAAa,IAAIe,eAAJ,CAAU,KAAKnB,KAAf,CAAb;AACA,UAAIoB,OAAOzD,OAAO0D,qBAAP,IAAgCC,KAAKC,GAAL,EAA3C;AACA,UAAIA,YAAJ;AACA,UAAIC,cAAJ;AACA,UAAMC,WAAW,EAAjB;AACE,UAAMC,OAAO,SAAPA,IAAO,GAAM;AACjB,cAAKpB,OAAL,GAAe,4BAAgBoB,IAAhB,CAAf;AACAH,cAAM5D,OAAO0D,qBAAP,IAAgCC,KAAKC,GAAL,EAAtC;AACAC,gBAAQD,MAAMH,IAAd;AACA,YAAMO,YAAY,MAAK3B,KAAvB;AACA,YAAIwB,QAAQC,QAAZ,EAAsB;AACpBL,iBAAOG,MAAOC,QAAQC,QAAtB;AACA,gBAAKzB,KAAL,GAAa,MAAKI,KAAL,CAAWwB,SAAX,CAAqBD,SAArB,CAAb;AACA,gBAAKvB,KAAL,CAAWyB,MAAX,CAAkBF,SAAlB;AACA,cAAI,MAAKvB,KAAL,CAAW0B,OAAX,CAAmBH,SAAnB,CAAJ,EAAmC;AACjC,kBAAKnB,IAAL;AACA,kBAAKR,KAAL,CAAW1B,MAAX,CAAkBqC,gBAAlB,CAAmC,OAAnC,EAA4C,MAAKF,OAAjD,EAA0D,KAA1D;AACD;AACF;AACF,OAdD;AAeA,WAAKH,OAAL,GAAelB,sBAAsBsC,IAAtB,CAAf;AACH;;;2BAEO;AACNK,4BAAYC,OAAZ,CAAoB,KAAKhB,OAAL,CAAa5C,CAAjC,EAAoC,KAAK4C,OAAL,CAAa3C,CAAjD,EAAoD,KAAK2C,OAAL,CAAaC,IAAjE,EAAuE,KAAKD,OAAL,CAAaE,GAApF;AACA,UAAI,KAAKZ,OAAT,EAAkB;AAChB,mCAAe,KAAKA,OAApB;AACA,aAAKA,OAAL,GAAe2B,SAAf;AACD;AACF;;;4BAEQC,G,EAAK;AACZA,UAAIC,cAAJ;AADY,UAEJ7D,MAFI,GAEO,KAAK0B,KAFZ,CAEJ1B,MAFI;;AAGZ,UAAM8D,OAAO9D,OAAO+D,qBAAP,EAAb;AACA,UAAMvB,OAAO,KAAKE,OAAL,CAAa5C,CAA1B;AACA,UAAM2C,OAAO,KAAKC,OAAL,CAAa3C,CAA1B;AACA,UAAMiE,UAAU,KAAKtB,OAAL,CAAaC,IAA7B;AACA,UAAMsB,SAAS,KAAKvB,OAAL,CAAaE,GAA5B;AACA,UAAM5E,IAAI4F,IAAIM,OAAJ,GAAcJ,KAAKnB,IAAnB,GAA0BqB,OAApC;AAAA,UACI/F,IAAI2F,IAAIO,OAAJ,GAAcL,KAAKlB,GAAnB,GAAyBqB,MADjC;AAEA,UAAIhG,IAAI,CAAJ,IAASA,IAAIwE,IAAb,IAAqBzE,IAAI,CAAzB,IAA8BA,IAAIwE,IAAtC,EAA4C;AAAE;AAC5C,aAAKf,IAAL;AACA,aAAKC,KAAL,CAAW1B,MAAX,CAAkBoE,mBAAlB,CAAsC,OAAtC,EAA+C,KAAKjC,OAApD;AACD;AACF;;;4BAGQyB,G,EAAK;AACZA,UAAIC,cAAJ;AACA,UAAIR,YAAY,KAAK3B,KAArB;AACA,cAAOkC,IAAIS,GAAX;AACE,aAAK,SAAL;AAAgB,eAAK3C,KAAL,GAAa,KAAKI,KAAL,CAAWwC,eAAX,CAA2BjB,SAA3B,EAAsClC,YAAtC,CAAb,CAA2D;AAC3E,aAAK,WAAL;AAAkB,eAAKO,KAAL,GAAa,KAAKI,KAAL,CAAWwC,eAAX,CAA2BjB,SAA3B,EAAsCjC,YAAtC,CAAb,CAA2D;AAC7E,aAAK,WAAL;AAAkB,eAAKM,KAAL,GAAa,KAAKI,KAAL,CAAWwC,eAAX,CAA2BjB,SAA3B,EAAsChC,WAAtC,CAAb,CAA0D;AAC5E,aAAK,YAAL;AAAmB,eAAKK,KAAL,GAAa,KAAKI,KAAL,CAAWwC,eAAX,CAA2BjB,SAA3B,EAAsC/B,WAAtC,CAAb,CAA0D;AAJ/E;AAMD;;;;;;kBAGYE,I;;;;;;;ACvGF;;;;;;;;AAGb;;AACA;;;;IAEMqB,K;AACJ,iBAAa0B,KAAb,EAAoB;AAAA;;AAClB,SAAK7C,KAAL,GAAa6C,KAAb;AACA,SAAKD,eAAL,GAAuB,KAAKA,eAAL,CAAqBrC,IAArB,CAA0B,IAA1B,CAAvB;AACD;;;;2BAEOoB,S,EAAW;AACjB,UAAMrD,SAASf,SAASuF,cAAT,CAAwB,UAAxB,CAAf;AACA,UAAMxF,MAAMgB,OAAOb,UAAP,CAAkB,IAAlB,CAAZ;AAFiB,UAGT2C,KAHS,GAGOuB,SAHP,CAGTvB,KAHS;AAAA,UAGFC,IAHE,GAGOsB,SAHP,CAGFtB,IAHE;;;AAKjB/C,UAAIyF,SAAJ,GAAgB,MAAhB;AACAzF,UAAI0F,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB1E,OAAOE,KAA1B,EAAiCF,OAAOG,MAAxC;;AAEAnB,UAAIyF,SAAJ,GAAgB,KAAhB;AACA3C,YAAM6C,OAAN,CAAc,aAAK;AACjB3F,YAAI0F,QAAJ,CAAaE,EAAE5G,CAAF,GAAMkD,YAAnB,EAA0B0D,EAAE3G,CAAF,GAAMiD,YAAhC,EAAuCA,YAAvC,EAA8CA,YAA9C;AACA,OAFF;;AAIAlC,UAAIyF,SAAJ,GAAgB,OAAhB;AACAzF,UAAI0F,QAAJ,CAAa3C,KAAK/D,CAAL,GAASkD,YAAtB,EAA6Ba,KAAK9D,CAAL,GAASiD,YAAtC,EAA6CA,YAA7C,EAAoDA,YAApD;AAED;;;oCAEgBmC,S,EAAWwB,G,EAAK;AAC/B,UAAMnD,QAAQ,wBAAYmD,IAAI7G,CAAhB,EAAmB6G,IAAI5G,CAAvB,IACZ,kBAAMoF,SAAN,EAAiB,EAAExB,YAAYwB,UAAUxB,UAAV,CAAqBiD,MAArB,CAA4B,CAACD,GAAD,CAA5B,CAAd,EAAjB,CADY,GAEZxB,UAAUxB,UAFZ;AAGA,aAAOH,KAAP;AACD;;;8BAEU2B,S,EAAW;AACpB,UAAMC,YAAY,kBAAMD,SAAN,EAAiB;AACjCxB,oBAAY,KAAKkD,cAAL,CAAoB1B,SAApB,CADqB;AAEjCvB,eAAO,KAAKkD,SAAL,CAAe3B,SAAf,CAF0B;AAGjCtB,cAAM,KAAKkD,QAAL,CAAc5B,SAAd;AAH2B,OAAjB,CAAlB;AAKA,aAAOC,SAAP;AACD;;;mCAEeD,S,EAAW;AACzB,aAAOA,UAAUxB,UAAV,CAAqBhD,MAArB,GAA8B,CAA9B,GAAkC,wBAAYwE,UAAUxB,UAAtB,CAAlC,GAAsEwB,UAAUxB,UAAvF;AACD;;;6BAESwB,S,EAAW;AACnB,UAAM6B,OAAQ7B,UAAUvB,KAAV,CAAgBjD,MAAhB,KAA2B,CAA5B,GACX,qBAASV,UAAT,EAAcC,UAAd,CADW,GAEX,EAAG;AACHJ,WAAIqF,UAAUvB,KAAV,CAAgB,CAAhB,EAAmB9D,CAAnB,GAAuBqF,UAAUxB,UAAV,CAAqB,CAArB,EAAwB7D,CADnD;AAEAC,WAAIoF,UAAUvB,KAAV,CAAgB,CAAhB,EAAmB7D,CAAnB,GAAuBoF,UAAUxB,UAAV,CAAqB,CAArB,EAAwB5D;AAFnD,OAFF;AAMA,aAAOiH,IAAP;AACD;;;8BAEU7B,S,EAAW;AACpB,UAAMvB,QAAQ,KAAK0B,OAAL,CAAaH,SAAb,IACZ,EADY,GAEZ,KAAK8B,OAAL,CAAa9B,SAAb,IACE,CAAC,KAAK+B,QAAL,CAAc/B,SAAd,CAAD,EAA2ByB,MAA3B,CAAkCzB,UAAUvB,KAA5C,CADF,CACqD;AADrD,QAEE,CAAC,KAAKsD,QAAL,CAAc/B,SAAd,CAAD,EAA2ByB,MAA3B,CAAkC,wBAAYzB,UAAUvB,KAAtB,CAAlC,CAJJ,CADoB,CAKkD;AACtE,aAAOA,KAAP;AACD;;;6BAESuB,S,EAAW;AACnB,aAAO,KAAK8B,OAAL,CAAa9B,SAAb,IACL,qBAASlF,UAAT,EAAcC,UAAd,CADK,GAELiF,UAAUtB,IAFZ;AAGD;;;4BAEQsB,S,EAAW;AACjB,aAAO,oBAAQ,KAAK+B,QAAL,CAAc/B,SAAd,CAAR,EAAkCA,UAAUtB,IAA5C,CAAP;AACF;;;kCAEcsB,S,EAAW;AAAA;;AACxB,aAAOA,UAAUvB,KAAV,CAAgBuD,IAAhB,CAAqB;AAAA,eAAM,oBAAQC,EAAR,EAAY,MAAKF,QAAL,CAAc1D,KAAd,CAAZ,CAAN;AAAA,OAArB,CAAP;AACD;;;4BAEQ2B,S,EAAW;AAAA,UACVvB,KADU,GACAuB,SADA,CACVvB,KADU;;AAElB,UAAIA,MAAMjD,MAAN,IAAgB,CAApB,EAAuB;AACrB,YAAM0G,eAAezD,MAAM,CAAN,EAAS9D,CAAT,GAAa,CAAb,IAAkB8D,MAAM,CAAN,EAAS9D,CAAT,IAAcG,UAAhC,IAAuC2D,MAAM,CAAN,EAAS7D,CAAT,GAAa,CAApD,IAAyD6D,MAAM,CAAN,EAAS7D,CAAT,IAAcG,UAA5F;AACA,YAAImH,YAAJ,EAAkB,OAAO,IAAP;AACnB;AACD,aAAO,KAAP;AACD;;;;;;kBAGY1C,K;;;;;;;AC7FF;;;;;;;AAEb;;AAEO,IAAMY,oCAAc;AACzBC,WAAS,iBAAC5D,CAAD,EAAIC,CAAJ,EAAO4C,IAAP,EAAaC,GAAb,EAAqB;AAC5B,QAAM5C,SAASf,SAASuF,cAAT,CAAwB,UAAxB,CAAf;AACA,QAAMxF,MAAMgB,OAAOb,UAAP,CAAkB,IAAlB,CAAZ;;AAEAH,QAAIyF,SAAJ,GAAgB,MAAhB;AACAzF,QAAI0F,QAAJ,CAAa1E,OAAOE,KAAP,GAAe,CAA5B,EAA+BF,OAAOG,MAAP,GAAgB,CAA/C,EAAkDL,CAAlD,EAAqDC,CAArD;;AAEAf,QAAIwG,SAAJ,GAAgB,EAAhB;AACAxG,QAAIyG,WAAJ,GAAgB,SAAhB;AACAzG,QAAI0G,UAAJ,CAAe/C,IAAf,EAAqBC,GAArB,EAA0B9C,CAA1B,EAA6BC,CAA7B;;AAEAf,QAAI2G,IAAJ,GAAW,YAAX;AACA3G,QAAIyF,SAAJ,GAAgB,MAAhB;AACAzF,QAAI4G,SAAJ,GAAc,QAAd;AACA5G,QAAI6G,QAAJ,CAAa,YAAb,EAA2B7F,OAAOE,KAAP,GAAapB,kBAAb,GAAyB,CAApD,EAAuDkB,OAAOG,MAAP,GAAcrB,kBAAd,GAA0B,CAAjF;AACAE,QAAI2G,IAAJ,GAAW,YAAX;AACA3G,QAAI6G,QAAJ,CAAa,wBAAb,EAAuC7F,OAAOE,KAAP,GAAapB,kBAAb,GAAyB,CAAhE,EAAmEkB,OAAOG,MAAP,GAAcrB,kBAAd,GAA0B,CAA1B,GAA8B,EAAjG;AACD;AAlBwB,CAApB;;kBAqBQ2E,W;;;;;;ACzBf,yC","file":"snake.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8f6ef7dca6f931246d06","'use strict';\n\n// Generic\nexport const merge = (...a) => Object.assign({}, ...a);\nexport const push = (arr, ...a) => [arr, ...a];\n//Point logic\nexport const ptEqual = (p1, p2) => p1.x === p2.x && p1.y === p2.y;\nexport const PtRandom = (COL, ROW) => ({ x: Math.floor(Math.random() * (COL - 1)), y: Math.floor(Math.random() * (ROW - 1)) });\nexport const isValidMove = (x,y) => (x === 0 && Math.abs(y) === 1) || (y === 0 && Math.abs(x) === 1); //making sure it's the allowed direction\nexport const droppedHead = (arr) => arr.slice(1);\nexport const droppedTail = (arr) => arr.slice(0, arr.length - 1)\n\n//canvas retina\nexport const PIXEL_RATIO = ((ratio) => {\n  if (ratio) return ratio;\n  const ctx = document.createElement('canvas').getContext('2d'),\n      dpr = window.devicePixelRatio || 1,\n      bsr = ctx.webkitBackingStorePixelRatio ||\n            ctx.mozBackingStorePixelRatio ||\n            ctx.msBackingStorePixelRatio ||\n            ctx.oBackingStorePixelRatio ||\n            ctx.backingStorePixelRatio || 1;\n  return dpr / bsr;\n})();\n\nexport const createHiDPICanvas = (w, h, ratio) => {\n    if (!ratio) { ratio = PIXEL_RATIO; }\n    const canvas = document.createElement('canvas');\n    canvas.id = 'myCanvas';\n    canvas.width = w * ratio;\n    canvas.height = h * ratio;\n    canvas.style.width = w + \"px\";\n    canvas.style.height = h + \"px\";\n    canvas.getContext('2d').setTransform(ratio, 0, 0, ratio, 0, 0);\n    return canvas;\n}\n\nexport const cancelAniFrame = window.cancelAnimationFrame\n                                    || window.mozCancelAnimationFrame\n                                    || window.mozCancelRequestAnimationFrame\n                                    || window.mozCancelAnimationFrame\n                                    || window.webkitCancelRequestAnimationFrame\n                                    || window.msCancelRequestAnimationFrame\n                                    || window.msCancelAnimationFrame;\n\nexport const requestAniFrame = window.requestAnimationFrame\n                                     || window.mozRequestAnimationFrame\n                                     || window.webkitRequestAnimationFrame\n                                     || window.msRequestAnimationFrame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/utils.js","'use strict';\n\n// Game View\nexport const COL= 70;\nexport const ROW = 50;\nexport const SCALE = 15;\n\n// Game Controller\nexport const NORTH = { x: 0, y: -1 };\nexport const SOUTH = { x: 0, y: 1 };\nexport const WEST = { x: -1, y: 0 };\nexport const EAST = { x: 1, y: 0 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/const.js","'use strict';\n\nimport Game from './lib/Game';\nimport CSS from '../css/app.scss';\n\nconst app = new Game;\napp.init();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/app.js","'use strict';\n\nimport { COL, ROW, SCALE, NORTH, SOUTH, EAST, WEST } from './const';\nimport { PtRandom, PIXEL_RATIO, createHiDPICanvas, cancelAniFrame, requestAniFrame } from './utils';\nimport Snake from './Snake';\nimport StatusModal from './StatusModal';\n\n\nclass Game {\n  constructor () {\n    // Building the grid that snake can travel on and where the food can be placed\n    this.state = {\n      col: COL,\n      row: ROW,\n      directions: [WEST], // hold quened instructions\n      snake: [],  // holds point segments of snake\n      food: PtRandom(COL, ROW),\n      frameID: null,\n      canvas: null,\n    };\n    this.init = this.init.bind(this);\n    this.stop = this.stop.bind(this);\n    this.restart = this.restart.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    window.addEventListener('keyup', this.onKeyUp, false);\n  }\n\n\n  init () {\n    if(!this.state.canvas) {\n      const canvas = createHiDPICanvas(COL * SCALE, ROW * SCALE, 2); // w, h, pixeldenstiy\n      document.querySelectorAll('#snake-container')[0].appendChild(canvas);\n      const boxW = canvas.width / PIXEL_RATIO / 2;\n      const boxH = canvas.height / PIXEL_RATIO / 2;\n      this.boxInfo = {\n        w: boxW,\n        h: boxH,\n        left: (canvas.width / PIXEL_RATIO - boxW) / 2,\n        top: (canvas.height / PIXEL_RATIO - boxH) / 2,\n      };\n      this.state.canvas = canvas;\n    }\n\n    this.snake = new Snake(this.state);\n    let then = window.mozAnimationStartTime || Date.now();\n    let now;\n    let delta;\n    const interval = 55;\n      const step = () => {\n        this.frameID = requestAniFrame(step);\n        now = window.mozAnimationStartTime || Date.now();\n        delta = now - then;\n        const prevState = this.state;\n        if (delta > interval) {\n          then = now - (delta % interval);\n          this.state = this.snake.nextState(prevState);\n          this.snake.render(prevState);\n          if (this.snake.willDie(prevState)) {\n            this.stop();\n            this.state.canvas.addEventListener('click', this.restart, false);\n          }\n        }\n      }\n      this.frameID = requestAnimationFrame(step);\n  }\n\n  stop () {\n    StatusModal.showDie(this.boxInfo.w, this.boxInfo.h, this.boxInfo.left, this.boxInfo.top);\n    if (this.frameID) {\n      cancelAniFrame(this.frameID);\n      this.frameID = undefined;\n    }\n  }\n\n  restart (evt) {\n    evt.preventDefault();\n    const { canvas } = this.state;\n    const rect = canvas.getBoundingClientRect();\n    const boxW = this.boxInfo.w;\n    const boxH = this.boxInfo.h;\n    const boxLeft = this.boxInfo.left;\n    const boxTop = this.boxInfo.top;\n    const x = evt.clientX - rect.left - boxLeft,\n        y = evt.clientY - rect.top - boxTop;\n    if (y > 0 && y < boxH && x > 0 && x < boxW) { // RESTART THE GAME IF USER CLICK WITHIN RED STATUS BOX\n      this.init();\n      this.state.canvas.removeEventListener('click', this.restart);\n    }\n  }\n\n\n  onKeyUp (evt) {\n    evt.preventDefault();\n    let prevState = this.state;\n    switch(evt.key) {\n      case 'ArrowUp': this.state = this.snake.updateDirection(prevState, NORTH); break;\n      case 'ArrowDown': this.state = this.snake.updateDirection(prevState, SOUTH); break;\n      case 'ArrowLeft': this.state = this.snake.updateDirection(prevState, WEST); break;\n      case 'ArrowRight': this.state = this.snake.updateDirection(prevState, EAST); break;\n    }\n  }\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/Game.js","'use strict';\n\n\nimport { COL, ROW, SCALE, BORDER_W } from './const';\nimport { merge, isValidMove, PtRandom, ptEqual, droppedHead, droppedTail } from './utils';\n\nclass Snake {\n  constructor (props) {\n    this.state = props;\n    this.updateDirection = this.updateDirection.bind(this);\n  }\n\n  render (prevState) {\n    const canvas = document.getElementById('myCanvas');\n    const ctx = canvas.getContext('2d');\n    const { snake, food } = prevState;\n\n    ctx.fillStyle = '#000';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    ctx.fillStyle = 'red';\n    snake.forEach(s => {\n      ctx.fillRect(s.x * SCALE, s.y * SCALE, SCALE, SCALE);\n     });\n\n    ctx.fillStyle = 'green';\n    ctx.fillRect(food.x * SCALE, food.y * SCALE, SCALE, SCALE);\n\n  }\n\n  updateDirection (prevState, dir) {\n    const state = isValidMove(dir.x, dir.y)\n    ? merge(prevState, { directions: prevState.directions.concat([dir]) })\n    : prevState.directions;\n    return state;\n  }\n\n  nextState (prevState) {\n    const nextState = merge(prevState, {\n      directions: this.nextDirections(prevState),\n      snake: this.nextSnake(prevState),\n      food: this.nextFood(prevState),\n    });\n    return nextState;\n  }\n\n  nextDirections (prevState) {\n    return prevState.directions.length > 1 ? droppedHead(prevState.directions) : prevState.directions;\n  }\n\n  nextHead (prevState) {\n    const head = (prevState.snake.length === 0)\n    ? PtRandom(COL, ROW)\n    : {  // if snake already appers on screen, then compute where the new head should be\n      x: (prevState.snake[0].x + prevState.directions[0].x),\n      y: (prevState.snake[0].y + prevState.directions[0].y),\n    }\n    return head;\n  }\n\n  nextSnake (prevState) {\n    const snake = this.willDie(prevState)\n    ? []\n    : this.willEat(prevState)\n      ? [this.nextHead(prevState)].concat(prevState.snake) // append the new head with right direction to the exsiting snake body\n      : [this.nextHead(prevState)].concat(droppedTail(prevState.snake));  // on the next frame, undraw the tail to maintain the right amount of segments to create the illustion of snake scrawling\n    return snake;\n  }\n\n  nextFood (prevState) {\n    return this.willEat(prevState)\n    ? PtRandom(COL, ROW)\n    : prevState.food\n  }\n\n  willEat (prevState) {\n     return ptEqual(this.nextHead(prevState), prevState.food);\n  }\n\n  willCrashSelf (prevState) {\n    return prevState.snake.find(pt => ptEqual(pt, this.nextHead(state)));\n  }\n\n  willDie (prevState) {\n    const { snake } = prevState;\n    if (snake.length >= 1) {\n      const CRASH_BORDER = snake[0].x < 0 || snake[0].x >= COL || snake[0].y < 0 || snake[0].y >= ROW;\n      if (CRASH_BORDER) return true;\n    }\n    return false;\n  }\n}\n\nexport default Snake;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/Snake.js","'use strict';\n\nimport { PIXEL_RATIO } from './utils';\n\nexport const StatusModal = {\n  showDie: (w, h, left, top) => {\n    const canvas = document.getElementById('myCanvas');\n    const ctx = canvas.getContext('2d');\n\n    ctx.fillStyle = '#000';\n    ctx.fillRect(canvas.width / 2, canvas.height / 2, w, h);\n\n    ctx.lineWidth = 10;\n    ctx.strokeStyle=\"#FF0000\";\n    ctx.strokeRect(left, top, w, h);\n\n    ctx.font = \"30px Arial\";\n    ctx.fillStyle = '#FFF';\n    ctx.textAlign=\"center\";\n    ctx.fillText(\"Game Over!\", canvas.width/PIXEL_RATIO/2, canvas.height/PIXEL_RATIO/2);\n    ctx.font = \"14px Arial\";\n    ctx.fillText(\"Click to start over...\", canvas.width/PIXEL_RATIO/2, canvas.height/PIXEL_RATIO/2 + 20);\n  }\n}\n\nexport default StatusModal;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/lib/StatusModal.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/app.scss\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}